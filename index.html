<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì—¬í–‰ ì›¹ì‚¬ì´íŠ¸</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
  <header class="bg-blue-600 text-white p-4 text-center text-2xl font-bold">
    ë‚˜ë§Œì˜ ì—¬í–‰ ì‚¬ì´íŠ¸
  </header>

  <main class="p-6 max-w-6xl mx-auto">
    <!-- ì—¬í–‰ ì¼ì • ì…ë ¥ -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">ì—¬í–‰ ì¼ì • ì¶”ê°€</h2>
      <div class="flex flex-col gap-2 md:flex-row">
        <input id="planInput" type="text" placeholder="ì˜ˆ: ë¶€ì‚° ì—¬í–‰" class="flex-1 p-2 border rounded">
        <input id="dateInput" type="date" class="p-2 border rounded">
        <button onclick="addPlan()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ì¶”ê°€</button>
      </div>
    </section>

    <!-- ê²€ìƒ‰ -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">ì¼ì • ê²€ìƒ‰</h2>
      <input id="searchInput" type="text" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥..." class="w-full p-2 border rounded" oninput="renderPlans()">
    </section>

    <!-- ì¼ì • ëª©ë¡ -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">ë‚˜ì˜ ì—¬í–‰ ì¼ì •</h2>
      <ul id="planList" class="space-y-2"></ul>
    </section>

    <!-- ì¶”ì²œ ì—¬í–‰ ì½”ìŠ¤ -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">ì¶”ì²œ ì—¬í–‰ ì½”ìŠ¤</h2>
      <ul id="recommendList" class="space-y-2"></ul>
    </section>

    <!-- ì¦ê²¨ì°¾ê¸° -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">â­ ì¦ê²¨ì°¾ê¸° ì—¬í–‰ì§€</h2>
      <ul id="favorites" class="space-y-2"></ul>
    </section>

    <!-- ì‹¤ì‹œê°„ ë‚ ì”¨ -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">ğŸŒ¤ ì‹¤ì‹œê°„ ë‚ ì”¨ í™•ì¸</h2>
      <div class="flex flex-col gap-2 md:flex-row">
        <input id="cityInput" type="text" placeholder="ë„ì‹œ ì´ë¦„ (ì˜ì–´ë¡œ ì…ë ¥: Seoul, Tokyo...)" class="flex-1 p-2 border rounded">
        <button onclick="getWeather()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">í™•ì¸</button>
      </div>
      <div id="weatherResult" class="mt-3 p-3 bg-white rounded shadow"></div>
    </section>

    <!-- í™˜ìœ¨ ë³€í™˜ê¸° -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">ğŸ’± í™˜ìœ¨ ë³€í™˜ê¸° (KRW â†’ ì™¸êµ­ í†µí™”)</h2>
      <div class="flex flex-col gap-2 md:flex-row">
        <input id="krwInput" type="number" placeholder="ê¸ˆì•¡ (â‚©)" class="flex-1 p-2 border rounded">
        <select id="currencySelect" class="p-2 border rounded">
          <option value="USD">ë‹¬ëŸ¬ (USD)</option>
          <option value="EUR">ìœ ë¡œ (EUR)</option>
          <option value="GBP">íŒŒìš´ë“œ (GBP)</option>
          <option value="JPY">ì—”í™” (JPY)</option>
        </select>
        <button onclick="convertCurrency()" class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">ë³€í™˜</button>
      </div>
      <div id="currencyResult" class="mt-3 p-3 bg-white rounded shadow"></div>
    </section>

    <!-- ì¶”ì²œ ì—¬í–‰ì§€ -->
    <section>
      <h2 class="text-xl font-semibold mb-4">ì¶”ì²œ ì—¬í–‰ì§€</h2>

      <h3 class="text-lg font-bold mt-4 mb-2">ğŸŒ ì•„ì‹œì•„</h3>
      <div id="asia" class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"></div>

      <h3 class="text-lg font-bold mt-4 mb-2">ğŸŒ ìœ ëŸ½</h3>
      <div id="europe" class="grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"></div>

      <h3 class="text-lg font-bold mt-4 mb-2">ğŸŒ ì•„ë©”ë¦¬ì¹´</h3>
      <div id="america" class="grid grid-cols-2 md:grid-cols-5 gap-4"></div>
    </section>
  </main>

  <script>
    const planInput = document.getElementById("planInput");
    const dateInput = document.getElementById("dateInput");
    const searchInput = document.getElementById("searchInput");
    const planList = document.getElementById("planList");
    const recommendList = document.getElementById("recommendList");
    const favoritesList = document.getElementById("favorites");

    let plans = JSON.parse(localStorage.getItem("plans")) || [];
    let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

    function savePlans() { localStorage.setItem("plans", JSON.stringify(plans)); }
    function saveFavorites() { localStorage.setItem("favorites", JSON.stringify(favorites)); }

    function renderPlans() {
      const searchTerm = searchInput.value.toLowerCase();
      planList.innerHTML = "";
      plans
        .filter(plan => plan.text.toLowerCase().includes(searchTerm) || plan.date.includes(searchTerm))
        .forEach((plan, index) => {
          const li = document.createElement("li");
          li.className = "flex justify-between items-center bg-white p-3 rounded shadow";
          li.innerHTML = `<span>${plan.text} (${plan.date})</span>
            <button onclick="deletePlan(${index})" class="text-red-500 hover:underline">ì‚­ì œ</button>`;
          planList.appendChild(li);
        });
    }

    function addPlan() {
      const textValue = planInput.value.trim();
      const dateValue = dateInput.value;
      if (textValue && dateValue) {
        plans.push({ text: textValue, date: dateValue });
        savePlans();
        renderPlans();
        generateRecommendedCourse();
        planInput.value = "";
        dateInput.value = "";
      }
    }

    function deletePlan(index) {
      plans.splice(index, 1);
      savePlans();
      renderPlans();
      generateRecommendedCourse();
    }

    function generateRecommendedCourse() {
      recommendList.innerHTML = "";
      if (plans.length === 0) {
        recommendList.innerHTML = "<li class='bg-gray-200 p-2 rounded'>ì¼ì •ì„ ë¨¼ì € ì¶”ê°€í•´ì£¼ì„¸ìš”.</li>";
        return;
      }
      const sortedPlans = [...plans].sort((a, b) => new Date(a.date) - new Date(b.date));
      const courses = [];
      let dayCourse = [];
      let currentDate = sortedPlans[0].date;
      sortedPlans.forEach(plan => {
        if (plan.date !== currentDate) {
          courses.push({ date: currentDate, plans: dayCourse });
          dayCourse = [];
          currentDate = plan.date;
        }
        dayCourse.push(plan.text);
      });
      courses.push({ date: currentDate, plans: dayCourse });
      courses.forEach((course, index) => {
        const li = document.createElement("li");
        li.className = "bg-white p-3 rounded shadow";
        li.innerHTML = `<strong>Day ${index + 1} (${course.date})</strong>: ${course.plans.join(" â†’ ")}`;
        recommendList.appendChild(li);
      });
    }

    function renderFavorites() {
      favoritesList.innerHTML = "";
      if (favorites.length === 0) {
        favoritesList.innerHTML = "<li class='bg-gray-200 p-2 rounded'>ì¦ê²¨ì°¾ê¸°í•œ ì—¬í–‰ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</li>";
        return;
      }
      favorites.forEach((fav, index) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center bg-white p-3 rounded shadow";
        li.innerHTML = `<span>${fav}</span>
          <button onclick="deleteFavorite(${index})" class="text-red-500 hover:underline">ì‚­ì œ</button>`;
        favoritesList.appendChild(li);
      });
    }

    function addFavorite(city) {
      if (!favorites.includes(city)) {
        favorites.push(city);
        saveFavorites();
        renderFavorites();
      }
    }

    function deleteFavorite(index) {
      favorites.splice(index, 1);
      saveFavorites();
      renderFavorites();
    }

    // ë‚ ì”¨ API
    async function getWeather() {
      const city = document.getElementById("cityInput").value.trim();
      const result = document.getElementById("weatherResult");
      if (!city) return;
      const apiKey = "YOUR_API_KEY"; // OpenWeatherMap API í‚¤ í•„ìš”
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=kr`;
      try {
        const res = await fetch(url);
        const data = await res.json();
        if (data.cod === 200) {
          result.innerHTML = `<strong>${data.name}</strong>: ${data.weather[0].description}, ğŸŒ¡ ${data.main.temp}Â°C`;
        } else {
          result.innerHTML = "ë„ì‹œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
        }
      } catch {
        result.innerHTML = "ë‚ ì”¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ";
      }
    }

    // í™˜ìœ¨ ë³€í™˜ (KRW â†’ ì™¸êµ­ í†µí™”)
    const exchangeRates = {
      USD: 0.00073, // 1 KRW = 0.00073 USD
      EUR: 0.00067, // 1 KRW = 0.00067 EUR
      GBP: 0.00057, // 1 KRW = 0.00057 GBP
      JPY: 0.11     // 1 KRW = 0.11 JPY
    };

    function convertCurrency() {
      const krw = parseFloat(document.getElementById("krwInput").value);
      const currency = document.getElementById("currencySelect").value;
      const resultEl = document.getElementById("currencyResult");

      if (isNaN(krw) || krw <= 0) {
        resultEl.textContent = "ê¸ˆì•¡ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
        return;
      }

      const rate = exchangeRates[currency];
      const converted = (krw * rate).toFixed(2);

      resultEl.textContent = `${krw.toLocaleString()}ì› = ${converted} ${currency}`;
    }

    // ì¶”ì²œ ì—¬í–‰ì§€
    const asia = [
      { name: "ë„ì¿„", img: "https://upload.wikimedia.org/wikipedia/commons/1/12/Tokyo_Tower_and_around_Skyscrapers.jpg" },
      { name: "ì„œìš¸", img: "https://upload.wikimedia.org/wikipedia/commons/5/5f/Gyeongbokgung_Palace_Seoul.jpg" },
      { name: "í™ì½©", img: "https://upload.wikimedia.org/wikipedia/commons/2/2a/Hong_Kong_Skyline_from_Victoria_Peak.jpg" },
      { name: "ë°©ì½•", img: "https://upload.wikimedia.org/wikipedia/commons/a/a0/Bangkok_skyline.jpg" },
      { name: "ì‹±ê°€í¬ë¥´", img: "https://upload.wikimedia.org/wikipedia/commons/3/3f/Marina_Bay_Sands_Singapore.jpg" },
    ];
    const europe = [
      { name: "ëŸ°ë˜", img: "https://upload.wikimedia.org/wikipedia/commons/c/cd/London_Montage_L.jpg" },
      { name: "íŒŒë¦¬", img: "https://upload.wikimedia.org/wikipedia/commons/a/a8/Tour_Eiffel_Wikimedia_Commons.jpg" },
      { name: "ë¡œë§ˆ", img: "https://upload.wikimedia.org/wikipedia/commons/5/5a/Colosseum_in_Rome%2C_Italy_-_April_2007.jpg" },
      { name: "ë§ˆë“œë¦¬ë“œ", img: "https://upload.wikimedia.org/wikipedia/commons/9/9a/Plaza_Mayor_Madrid_Spain.jpg" },
      { name: "ë² ë¥¼ë¦°", img: "https://upload.wikimedia.org/wikipedia/commons/4/41/Berlin_Skyline_Fernsehturm_2017.jpg" },
    ];
    const america = [
      { name: "ë‰´ìš•", img: "https://upload.wikimedia.org/wikipedia/commons/a/ab/Lower_Manhattan_skyline_-_June_2017.jpg" },
      { name: "ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤", img: "https://upload.wikimedia.org/wikipedia/commons/6/6b/Los_Angeles_Skyline_at_Dusk.jpg" },
      { name: "ë§ˆì´ì• ë¯¸", img: "https://upload.wikimedia.org/wikipedia/commons/f/f1/Miami_Beach_Skyline.jpg" },
      { name: "ë¦¬ìš°ë°ìë„¤ì´ë£¨", img: "https://upload.wikimedia.org/wikipedia/commons/6/6f/Rio_de_Janeiro_-_Rafael_Frenkiel.jpg" },
      { name: "ë¶€ì—ë…¸ìŠ¤ì•„ì´ë ˆìŠ¤", img: "https://upload.wikimedia.org/wikipedia/commons/3/3b/Buenos_Aires_City_Center.jpg" },
    ];

    function renderDestinations(list, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      list.forEach(dest => {
        const card = document.createElement("div");
        card.className = "bg-white rounded shadow hover:shadow-lg cursor-pointer overflow-hidden";
        card.innerHTML = `
          <img src="${dest.img}" alt="${dest.name}" class="w-full h-32 object-cover">
          <div class="p-2 text-center font-semibold">${dest.name}</div>
          <button onclick="addFavorite('${dest.name}')" class="w-full bg-yellow-400 hover:bg-yellow-500 text-white py-1">â­ ì¦ê²¨ì°¾ê¸°</button>
        `;
        container.appendChild(card);
      });
    }

    renderPlans();
    generateRecommendedCourse();
    renderFavorites();
    renderDestinations(asia, "asia");
    renderDestinations(europe, "europe");
    renderDestinations(america, "america");
  </script>
</body>
</html>
